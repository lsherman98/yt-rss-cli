version: 2

before:
    hooks:
        - go mod tidy

builds:
    - id: ytrss
      binary: ytrss
      env:
          - CGO_ENABLED=0
      goos:
          - linux
          - darwin
          - windows
      goarch:
          - amd64
          - arm64
      ldflags:
          - -s -w
          - -X main.version={{.Version}}
          - -X main.commit={{.Commit}}
          - -X main.date={{.Date}}
      main: .

archives:
    - id: ytrss-archive
      formats:
          - tar.gz
          - zip

checksum:
    name_template: "checksums.txt"
    algorithm: sha256

changelog:
    sort: asc
    use: github
    filters:
        exclude:
            - "^docs:"
            - "^test:"
            - "^chore:"
            - "^ci:"
    groups:
        - title: "Features"
          regexp: '^feat(\(.*\))?:'
          order: 0
        - title: "Bug Fixes"
          regexp: '^fix(\(.*\))?:'
          order: 1
        - title: "Other Changes"
          order: 999

release:
    github:
        owner: lsherman98
        name: yt-rss-cli
    draft: false
    prerelease: auto
    mode: replace
